import{a as d,c as v,z as oe,H as ie,d as L,G as k,C as b,e as p,b as c,t as O,A as I,i as g,D as ae,r as y,O as re,o as D,f as se,w as le,h as ce,v as ue,j as de,F as $,l as w}from"./DSMXS7QP.js";import{_ as F}from"./En5Trtf1.js";import{a as fe}from"./mPgzQuY8.js";import{u as me}from"./BzknpekE.js";import{u as ge}from"./DGkdyxRD.js";import{_ as Q,a as _e}from"./DWs8vi_v.js";import{u as ve}from"./CFmnlp4M.js";import{_ as pe}from"./C7aSe0yv.js";import{A as be}from"./C3ZmL5SP.js";import"./q2IQmtD9.js";import"./C1MORkun.js";const X={__name:"RoundButton",props:{variant:{type:String,default:"default"}},emits:["click"],setup(e){const n={default:"border border-gray-200 hover:bg-gray-100",danger:"bg-red-200 enabled:hover:bg-red-100 text-red-900"};return(t,l)=>(d(),v("button",{class:ie(["text-sm font-medium rounded-full px-3 py-1",n[e.variant]??n.default]),onClick:l[0]||(l[0]=s=>t.$emit("click"))},[oe(t.$slots,"default")],2))}},ye=["src","alt"],he={class:"space-y-4"},xe={class:"text-xl font-medium"},$e={class:"flex justify-between"},ke=L({__name:"event-card",props:{title:String,when:String,image:String,description:String,label:String},emits:["register"],setup(e,{emit:n}){const{isLoading:t,withLoading:l}=me(),{getBadgeColor:s}=ge(),u=n;async function m(){await l(async()=>{u("register")})}return(a,r)=>{const o=ae,i=fe,h=F;return d(),k(h,null,{header:b(()=>[p(o,{to:`/events/${e.label}`},{default:b(()=>[c("img",{class:"min-h-[350px] max-h-[350px] w-full object-cover",src:e.image,alt:e.title},null,8,ye)]),_:1},8,["to"])]),footer:b(()=>[c("div",he,[c("h2",xe,O(e.title),1),c("p",null,O(e.description),1),c("div",$e,[p(i,{icon:"i-heroicons-bookmark",size:"sm",color:"white",variant:"solid",onClick:m,loading:g(t),disabled:g(t)},{default:b(()=>r[0]||(r[0]=[I(" Monitor Event ")])),_:1},8,["loading","disabled"]),p(o,{to:`/events/${e.label}`},{default:b(()=>[p(i,{color:g(s)(e.label??""),icon:"i-heroicons-home-modern",size:"sm",variant:"solid"},{default:b(()=>[I(" See all "+O(e.label)+" hotels ",1)]),_:1},8,["color"])]),_:1},8,["to"])])])]),_:1})}}}),we=Object.assign(ke,{__name:"EventCard"});var E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Se(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Y=Se,je=typeof E=="object"&&E&&E.Object===Object&&E,Be=je,Oe=Be,Ce=typeof self=="object"&&self&&self.Object===Object&&self,Ee=Oe||Ce||Function("return this")(),q=Ee,Ie=q,Le=function(){return Ie.Date.now()},Re=Le,Ne=/\s/;function Pe(e){for(var n=e.length;n--&&Ne.test(e.charAt(n)););return n}var Me=Pe,De=Me,Fe=/^\s+/;function Ae(e){return e&&e.slice(0,De(e)+1).replace(Fe,"")}var Ge=Ae,Ue=q,We=Ue.Symbol,K=We,U=K,Z=Object.prototype,ze=Z.hasOwnProperty,Ve=Z.toString,B=U?U.toStringTag:void 0;function He(e){var n=ze.call(e,B),t=e[B];try{e[B]=void 0;var l=!0}catch{}var s=Ve.call(e);return l&&(n?e[B]=t:delete e[B]),s}var Je=He,Qe=Object.prototype,Xe=Qe.toString;function Ye(e){return Xe.call(e)}var qe=Ye,W=K,Ke=Je,Ze=qe,et="[object Null]",tt="[object Undefined]",z=W?W.toStringTag:void 0;function nt(e){return e==null?e===void 0?tt:et:z&&z in Object(e)?Ke(e):Ze(e)}var ot=nt;function it(e){return e!=null&&typeof e=="object"}var at=it,rt=ot,st=at,lt="[object Symbol]";function ct(e){return typeof e=="symbol"||st(e)&&rt(e)==lt}var ut=ct,dt=Ge,V=Y,ft=ut,H=NaN,mt=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,vt=parseInt;function pt(e){if(typeof e=="number")return e;if(ft(e))return H;if(V(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=V(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=dt(e);var t=gt.test(e);return t||_t.test(e)?vt(e.slice(2),t?2:8):mt.test(e)?H:+e}var bt=pt,yt=Y,M=Re,J=bt,ht="Expected a function",xt=Math.max,$t=Math.min;function kt(e,n,t){var l,s,u,m,a,r,o=0,i=!1,h=!1,T=!0;if(typeof e!="function")throw new TypeError(ht);n=J(n)||0,yt(t)&&(i=!!t.leading,h="maxWait"in t,u=h?xt(J(t.maxWait)||0,n):u,T="trailing"in t?!!t.trailing:T);function S(f){var x=l,j=s;return l=s=void 0,o=f,m=e.apply(j,x),m}function R(f){return o=f,a=setTimeout(C,n),i?S(f):m}function _(f){var x=f-r,j=f-o,G=n-x;return h?$t(G,u-j):G}function N(f){var x=f-r,j=f-o;return r===void 0||x>=n||x<0||h&&j>=u}function C(){var f=M();if(N(f))return A(f);a=setTimeout(C,_(f))}function A(f){return a=void 0,T&&l?S(f):(l=s=void 0,m)}function te(){a!==void 0&&clearTimeout(a),o=0,l=r=s=a=void 0}function ne(){return a===void 0?m:A(M())}function P(){var f=M(),x=N(f);if(l=arguments,s=this,r=f,x){if(a===void 0)return R(r);if(h)return clearTimeout(a),a=setTimeout(C,n),S(r)}return a===void 0&&(a=setTimeout(C,n)),m}return P.cancel=te,P.flush=ne,P}var wt=kt;const Tt=Te(wt);function ee(){const e=y([]),n=y(!1),t=re(),l=async()=>{n.value=!0;const{data:a}=await ve(`${t.public.apiBase}/bookings`,"$p6SwNe7NzF");e.value=a.value,n.value=!1},s=a=>e.value.findIndex(r=>r.id===a);return{bookings:e,loading:n,fetchBookings:l,handleRegistration:async a=>{if(e.value.some(o=>o.eventId===a.id&&o.userId===1)){alert("You are already registered for this event.");return}const r={id:Date.now().toString(),userId:1,eventId:a.id,eventTitle:a.title,status:"pending"};e.value.push(r);try{const o=await $fetch(`${t.public.apiBase}/bookings`,{method:"POST",body:{...r,status:"confirmed"}}),i=s(r.id);e.value[i]=o}catch(o){console.error("Failed to register for event:",o),e.value=e.value.filter(i=>i.id!==r.id)}},cancelBooking:async a=>{const r=s(a),o=e.value[r];if(o){e.value.splice(r,1);try{await $fetch(`${t.public.apiBase}/bookings/${a}`,{method:"DELETE"})}catch(i){console.error("Failed to cancel booking:",i),e.value.splice(r,0,o)}}}}}const St={class:"space-y-4 items-center flex flex-col"},jt={class:"relative col-span-2"},Bt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Ot={key:1,class:"col-span-2 text-center text-gray-500"},Ct=L({__name:"event-list",setup(e){const{handleRegistration:n}=ee(),t=y([]),l=y(!1),s=y(null),u=y(""),m=async()=>{l.value=!0,s.value=null;try{const o=await fetch("http://localhost:3001/events");t.value=await o.json()}catch(o){s.value=o}finally{l.value=!1}};D(()=>m());const a=se(()=>t.value.filter(o=>o.title.toLowerCase().includes(u.value.toLowerCase()))),r=Tt(o=>{u.value=o},300);return le(u,o=>{r(o)}),(o,i)=>{const h=X,T=F,S=we,R=Q;return g(s)?(d(),k(T,{key:0},{default:b(()=>[c("div",St,[i[2]||(i[2]=c("div",{class:"text-red-500 text-center"}," Could not load events at the moment. Please start the JSON server. ",-1)),p(h,{onClick:m},{default:b(()=>i[1]||(i[1]=[I("Retry now")])),_:1})])]),_:1})):(d(),v($,{key:1},[c("form",jt,[ce(c("input",{"onUpdate:modelValue":i[0]||(i[0]=_=>de(u)?u.value=_:null),type:"text",placeholder:"Search...",class:"px-4 py-2 rounded w-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#4ade80]"},null,512),[[ue,g(u)]]),i[3]||(i[3]=c("button",{type:"submit",class:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500"},[c("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35M17 11a6 6 0 11-12 0 6 6 0 0112 0z"})])],-1))]),c("section",Bt,[g(l)?(d(),v($,{key:1},w(4,_=>p(R,{key:_})),64)):(d(),v($,{key:0},[g(a).length?(d(!0),v($,{key:0},w(g(a),_=>(d(),k(S,{key:_.id,title:_.title,when:_.date,image:_.image,label:_.label,description:_.description,onRegister:N=>g(n)(_)},null,8,["title","when","image","label","description","onRegister"]))),128)):(d(),v("div",Ot,"No events yet."))],64))])],64))}}}),Et=Object.assign(Ct,{__name:"EventList"}),It={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Lt={__name:"PackageList",setup(e){const n=y(!1),t=y(null),l=y([]),s=y([]),u=async()=>{n.value=!0,t.value=null;try{const m=await fetch("http://localhost:3001/events");l.value=await m.json();const a=await fetch("http://localhost:3001/packages");s.value=await a.json(),s.value=s.value.map(r=>{const o=l.value.find(i=>i.id==r.eventId);return r.event=o||void 0,r}),s.value=s.value.sort(()=>.5-Math.random()).slice(0,3)}catch(m){t.value=m}finally{n.value=!1}};return D(()=>u()),(m,a)=>{const r=_e,o=Q;return d(),v("section",It,[g(n)?(d(),v($,{key:1},w(3,i=>p(o,{key:i})),64)):(d(!0),v($,{key:0},w(g(s),i=>(d(),k(r,{key:i.id,id:i.id,"event-id":i.eventId,"hotel-id":i.hotelId,name:i.name,"meal-plan":i.mealPlan,"flight-included":i.flightIncluded,"package-base-discount-multiplier":i.packageBaseDiscountMultiplier,activity:i.activity,event:i.event},null,8,["id","event-id","hotel-id","name","meal-plan","flight-included","package-base-discount-multiplier","activity","event"]))),128))])}}},Rt={class:"flex justify-between"},Nt={class:"flex space-x-2"},Pt=L({__name:"booking-item",props:{title:String,status:String},emits:["cancelled"],setup(e){return(n,t)=>{const l=X,s=F;return d(),k(s,null,{default:b(()=>[c("div",Rt,[c("div",Nt,[c("div",null,O(e.title),1),c("div",null,O(e.status),1)]),p(l,{variant:"danger",onClick:t[0]||(t[0]=u=>n.$emit("cancelled"))},{default:b(()=>t[1]||(t[1]=[I("Cancel")])),_:1})])]),_:1})}}}),Mt=Object.assign(Pt,{__name:"BookingItem"}),Dt={class:"grid grid-cols-1 gap-4"},Ft=L({__name:"booking-list",setup(e){const{bookings:n,loading:t,fetchBookings:l,cancelBooking:s}=ee();return D(()=>{l()}),(u,m)=>{const a=Mt,r=pe;return d(),v("section",Dt,[g(t)?(d(!0),v($,{key:1},w(g(n).length,o=>(d(),k(r,{key:o}))),128)):(d(!0),v($,{key:0},w(g(n),o=>(d(),k(a,{key:o.id,title:o.eventTitle,status:o.status,onCancelled:i=>g(s)(o.id)},null,8,["title","status","onCancelled"]))),128))])}}}),At=Object.assign(Ft,{__name:"BookingList"}),Gt={class:"container mx-auto my-8 space-y-8"},Zt={__name:"index",setup(e){return(n,t)=>{const l=Et,s=Lt,u=At;return d(),v("main",Gt,[t[0]||(t[0]=c("h1",{class:"text-4xl font-medium text-center"},"Space Events",-1)),t[1]||(t[1]=c("h2",{class:"text-2xl font-medium"},"Our Destinations",-1)),p(l),t[2]||(t[2]=c("h2",{class:"text-2xl font-medium"},"Package Deals",-1)),p(s),t[3]||(t[3]=c("h2",{class:"text-2xl font-medium"},"Watchlist",-1)),p(u),t[4]||(t[4]=c("h2",{class:"text-2xl font-medium"},"Blogg Articles: Experience The Journey",-1)),p(be)])}}};export{Zt as default};
